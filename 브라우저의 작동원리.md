## 예를 들어, 로그인 버튼을 눌렀을 때 일어날 처리들에 대해 말해달라
![image](https://user-images.githubusercontent.com/84711115/148781213-bf3bc247-d3ce-497c-a940-07bc01ffe0f6.png)
1.  사용자 인터페이스   
 사용자가 접근할 수 있는 영역입니다. URI를 입력할 수 있는 주소 표시줄, 이전/다음 버튼, 북마크 메뉴, 새로 고침 버튼과 현재 문서의 로드를 중단할 수 있는 정지 버튼 , 홈 버튼 등 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분입니다.
 
2. 브라우저 엔진   
사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어합니다. Data Storage를 참조하며 로컬에 데이터를 쓰고 읽으면서 다양한 작업을 합니다.
 
3. 렌더링 엔진   
 웹 서버로부터 응답 받은 자원을 웹 브라우저 상에 나타냅니다. 예를 들어 HTML 문서를 응답받으면 HTML과 CSS를 파싱 하여 화면에 표시합니다. 브라우저의 동작 원리를 이해하려면 렌더링 엔진의 이해가 중요합니다.   
 브라우저는 서버로부터 HTML 문서를 응답받으면 렌더링 엔진의 HTML 파서와 CSS 파서에 의해 파싱(parsing)되어 DOM, CSSOM 트리로 변환되고 렌더 트리로 결합합니다. 이렇게 생성된 렌더 트리를 기반으로 브라우저는 웹 페이지를 나타냅니다. 

4. 통신   
 HTTP 요청과 같은, 서버와 통신이 가능하게 하는 네트워크 호출에 사용됩니다. 

5. UI 백엔드    
 select, input 등 기본적인 위젯을 그리는 인터페이스 입니다.

6. 자바스크립트 해석기   
 자바스크립트 코드를 해석하고 실행합니다. 

7. 자료 저장소   
 Cookie, Local Storage, Indexed DB 등 브라우저 메모리를 활용하여 저장하는 영역입니다.

### 렌더링 엔진
#### 렌더링 엔진은 HTML, XML, 이미지 등 요청받은 내용을 브라우저 화면에 표시하는 엔진입니다.   
렌더링 엔진은 좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시합니다. 그래서 일련의 과정들이 동기적으로 진행되지 않습니다. HTML을 파싱 할 때까지 기다리지 않고 렌더 트리 배치와 그리기 과정을 시작합니다.   

### 렌더링 엔진 동작 과정
렌더링 엔진은 서버로부터 응답받은 HTML 문서를 얻는 것으로 시작합니다. 이 문서의 내용은 보통 8KB 단위로 전송됩니다. 
아래 그림은 렌더링 엔진의 기본적인 동작 과정입니다. 
![image](https://user-images.githubusercontent.com/84711115/148781910-225c1b3e-6ea6-4a8e-9c7e-efec35cc9b61.png)
1. 렌더링 엔진은 HTML 문서를 파싱 하여 DOM 트리를 구축합니다.

2. 그다음 외부 CSS 파일과 함께 포함된  스타일 요소를 파싱 합니다.

3. DOM 트리와 ②의 결과물을 합쳐 렌더 트리를 구축합니다. 

4. 렌더 트리 각 노드에 대해 화면 상에서 배치할 곳을 결정합니다. 

5. UI 백엔드에서 렌더 트리의 각 노드를 그립니다. 

아래 그림은 렌더링 엔진 중 하나인 웹킷 엔진에  나타낸 그림입니다. 
![image](https://user-images.githubusercontent.com/84711115/148782536-3a8fe2de-2085-488f-a87c-df63a7a99c7a.png)
동작 과정의 순서는 위에서 설명한 기본 동작 과정과 유사합니다. 

### 자바스크립트 엔진
자바스크립트는 자바스크립트 엔진이 처리합니다. HTML 파서는 <script> 태그를 만나면 Javascript 코드를 실행하기 위해 DOM 생성 프로세스를 중지하고 자바스크립트 엔진으로 권한을 넘깁니다. 제어 권한을 넘겨받은 자바스크립트 엔진은 <script> 태그 내의 Javascript 코드 또는 src 속성에 정의된 Javascript 파일을 로드하고 파싱 하여 실행합니다. Javascript의 실행이 완료되면 다시 HTML 파서로 제어 권한을 넘겨서 중지했던 시점으로 돌아가 DOM 생성을 재개합니다. 
![image](https://user-images.githubusercontent.com/84711115/148785535-6b854c07-216d-4d58-8a60-175178ace9a0.png)
   이처럼 브라우저는 동기적으로 HTML, CSS, Javascript를 처리합니다. 하지만 자바스크립트 엔진에 제어 권한이 있을 때 Javascript 코드가 완성되지 않은 DOM을 조작하게 된다면 어떻게 될까요? 당연히 에러가 발생할 것입니다.   
이것이 HTML 파일에서 Javascript 코드를 <body>태그 하단에 위치시키는 이유입니다.
